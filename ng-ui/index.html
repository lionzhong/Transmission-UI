<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>AngularJS DEMO</title>
    <link rel="stylesheet" href="style/css/transmission.css">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body ng-controller="mainController">
<div class="header">
    <span class="logo"></span>
    <span class="logo-with-text"></span>
    <span class="icon-add"></span>
    <span class="icon-delete"></span>
    <span class="icon-start-light"></span>
    <span class="icon-pause-light"></span>
    <span class="icon-start-all-light"></span>
    <span class="icon-pause-all-light"></span>
</div>
<ul id="torrent-list" class="torrent-list">
    <li ng-repeat="item in data.torrent track by $index" ng-class="parsTorrentClassName(item.status,$index)" ng-click="selectTorrent($index)">
        <div class="name">{{item.name}}</div>
        <div class="status" ng-bind-html="parseText.Status($index)"></div>
        <div class="progess-bar">
            <div ng-style="{'width':item.percentDone < 1 ? item.percentDone * 100 + '%':100 + '%'}"></div>
        </div>
        <div class="transform-data" ng-bind-html="parseText.TransformData($index)"></div>
    </li>
</ul>
<div id="torrent-detail" class="torrent-detail" ng-class="{'show':detailShow}" ng-swipe-right="detail.close()">
    <span class="icon-close" ng-click="detail.close()"></span>
    <ul>
        <li ng-repeat="item in detail.tabNames track by $index" ng-class="{'selected':detail.selectedTabIndex === $index}" ng-click="detail.tabSelect($index)">
            <span ng-if="$index === 0" class="icon-info-light"></span>
            <span ng-if="$index === 1" class="icon-people"></span>
            <span ng-if="$index === 2" class="icon-server"></span>
            <span ng-if="$index === 3" class="icon-checklist"></span>
        </li>
    </ul>
    <div ng-include src="tmpUrl.blankDetail" include-replace></div>
    <div class="deail-contents" ng-if="detailShow" ng-show="detail.selectedTabIndex === 0">
        <h2>
            <span>{{detail.torrentData.name}}</span>
        </h2>
        <h3>活跃状态</h3>
        <div class="table" ng-if="detailShow">
            <table>
                <tbody>
                <tr>
                    <th>下载进度</th>
                    <td>
                        <span>{{bytesConvert(detail.torrentData.totalSize * (detail.torrentData.percentDone < 1 ? detail.torrentData.percentDone : 1)) + "/" + bytesConvert(detail.torrentData.totalSize) }}</span>
                        <span>{{"(" + (detail.torrentData.percentDone < 1 ? parseFloat2(detail.torrentData.percentDone * 100) : "100") + "%)"}}</span>
                        <span ng-if="data.detail.haveUnchecked > 0">未验证：{{bytesConvert(data.detail.haveUnchecked)}}</span>
                    </td>
                </tr>
                <tr>
                    <th>已上传</th>
                    <td>{{bytesConvert(detail.torrentData.uploadedEver)}}</td>
                </tr>
                <tr>
                    <th>已下载</th>
                    <td>{{bytesConvert(detail.torrentData.totalSize * (detail.torrentData.percentDone < 1 ? detail.torrentData.percentDone : 1))}}</td>
                </tr>
                <tr>
                    <th>状态</th>
                    <td>{{getStatusText({"status":detail.torrentData.status,"metaComplete":detail.torrentData.metadataPercentComplete})}}</td>
                </tr>
                <tr>
                    <th>运行时长</th>
                    <td>{{howLong(detail.torrentData.addedDate)}}</td>
                </tr>
                <tr>
                    <th>预计还需时长</th>
                    <td>{{parseEta(detail.torrentData.eta)}}</td>
                </tr>
                <tr>
                    <th>上一次活跃</th>
                    <td>{{getFullDate(data.detail.activityDate * 1000)}}</td>
                </tr>
                <tr>
                    <th>错误</th>
                    <td>
                        <span ng-if="detail.torrentData.error === 0">无错误</span>
                        <span ng-if="detail.torrentData.error === 1">Tracker服务器告警：</span>
                        <span ng-if="detail.torrentData.error === 2">Tracker服务器错误：</span>
                        <span ng-if="detail.torrentData.error === 3">本地错误：</span>
                        <span ng-if="detail.torrentData.error !== 0">{{detail.torrentData.errorString}}</span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <h3>明细</h3>
        <div class="table" ng-if="detailShow">
            <table>
                <tbody>
                <tr>
                    <th>大小</th>
                    <td>
                        <span>{{bytesConvert(detail.torrentData.totalSize)}}</span>
                        <span>({{data.detail.activityDate.pieceCount + "pieces @" + bytesConvert(data.detail.pieceSize)}})</span>
                    </td>
                </tr>
                <tr>
                    <th>位置</th>
                    <td>{{detail.torrentData.downloadDir}}</td>
                </tr>
                <tr>
                    <th>哈希</th>
                    <td>{{data.detail.hashString}}</td>
                </tr>
                <tr>
                    <th>私有</th>
                    <td>{{data.detail.isPrivate === true ? "私有种子":"公开种子"}}</td>
                </tr>
                <tr>
                    <th>源</th>
                    <td>
                        <spaan>创建者 {{data.detail.creator}}</spaan>
                        <span>于 {{getFullDate(data.detail.dateCreated * 1000)}} 创建</span>
                    </td>
                </tr>
                <tr>
                    <th>备注</th>
                    <td>{{data.detail.comment}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="deail-contents" ng-if="detail.loaded" ng-show="detail.selectedTabIndex === 1">2</div>
    <div class="deail-contents" ng-if="detail.loaded" ng-show="detail.selectedTabIndex === 2">3</div>
    <div class="deail-contents" ng-if="detail.loaded" ng-show="detail.selectedTabIndex === 3">4</div>
</div>
<div class="footer">
    <span class="icon-config"></span><span class="icon-settings"></span><span class="icon-scheduled"></span><span class="icon-listview"></span><span class="icon-info-black" ng-class="{'selected':detailShow}" ng-click="detail.show()"></span>
</div>
<script src="libs/requirejs/require.min.js"  data-main="load.js"></script>
</body>
</html>